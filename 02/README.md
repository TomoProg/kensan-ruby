# 今週のテーマ
役に立つ独自クラスを設計する

# 読んで理解したこと
## 2.1 いつ独自クラスを定義すべきか
### 筆者の考え

独自クラスを定義する前に、何よりもまず考えるべきことは「本当に独自クラスを 定義する必要があるのだろうか?」と問いかけること  

- 独自クラスを定義するメリット
  - カプセル化することで、操作を限定できる  
    サンプルコードでは、Stackを独自クラスにして、push pop以外を使えなくすることで、意図しない挙動ができないようにする
  - シンプルなメソッド呼び出しを提供できる  
    サンプルコードではシンボルしか入らないSymbolStackというクラスにpop時に経過時間も返す実装を紹介している  
    この場合、独自のクラスがあれば、push時の例外や経過時間の計算をクラスの中に閉じ込めて呼び出しをシンプルにできる

- デメリット
  - 独自クラスの使い方を知る必要が出てくる。これによる負担が増加する  
    組み込みクラスはRuby使いにとっては、ほぼほぼ使っているものであるため、負荷は少ない
  - 独自クラスを作って、呼び出す分、間接層ができて無駄にメモリを使ったり、GCの速度が遅くなる

あとはそのクラスがどのくらい広く使われるかを考えることも重要  
同じような処理を複数回書くのであれば、クラス定義するのが有効だが、そうでもないのであれば時期尚早かも  

### 自分の考え
メリットの部分は自分も同意。

デメリットの部分は自分にはしっくりこなかった。  
独自クラスの使い方を知る必要が出てきて、これによる負担の増加ということだが、それよりもクラス名やメソッド名をきちんと設計するべき思う。  
読んだだけでわかるクラス名やメソッド名を定義するべき（なるべく読まなくても使えるのが一番いい）  

間接層ができて無駄にメモリを使うなどのパフォーマンス面についても、業務システムでそれほど気になる部分ではないはず。  

また、同じような処理を複数回するかということも挙げているが、1回だけ使う場合でも呼び出しがシンプルになるのであれば、十分にクラス化する価値はあると思う。  
それにより、コードが読みやすくなる、また、テストコードが書きやすくなるというメリットも得られるのではないかと考える。  
チーム開発ではこっちの方が得なはず。  

## 2.2 SOLID 原則のトレードオフ
### SRP(Single-Responsibility Principle:単一責任の原則)
クラスは基本的には1つの目的を果たすべきものである  

### 筆者の考え  
この原則を満たすことで使いやすくなる。他のクラスと連携させたりしても何も問題がでない  
ただし、原則だからと適用してしまうと複雑性が増す。  

RubyのStringクラスを題材に、Stringクラスが文字列の追加、変更の操作をそれぞれクラス化した場合に複雑になることを示している。  
単一の目的ごとにクラス化するのではなく、関連する複数の目的を単一のクラスが担う  
文字列に関連する操作は関連する操作をそれぞれをクラス化するのではなく、文字列というクラスでひとまとめにする  

このプログラムを部分的に置き換えたいかどうかも指針になる  
置き換えたい場合は置き換えたい部分をそれぞれクラスにしておく  
特に置き換える必要がないのであれば、クラスを置き換えれるような構造にはせず、シンプルに保っておく  
複雑さが必要になったときに対処した方がシンプルに保てる  

### 自分の考え  
使いやすくなるのはなんでだろう？  
複数の目的を持てばもつほど、さまざまなクラスに依存してしまい、簡単にnewできない、使い回しもできないということかと思う  

確かにStringクラスが複数のクラスに分かれていた場合、ものすごく使いにくいと思う。
単一責任の原則という名前だが、単一責任がどこまでなのかを考えるのが難しいのだなと感じた。
文字列の追加をする責任、文字列の変更をする責任というふうに考えるとクラスが分かれているのは原則の名前的にはあってそう。
一段階抽象度をあげて、文字列に関することをするのが責任とするとStringクラス一個になる。

プログラムを部分的に置き換えたい場合は確かにクラスにしておいた方が取り替えできるので同意。
シンプルに保っておく部分については、シンプルに保てばいいと思うが、もし取り替えたいときが出てきたときに、こうすればできるはずというところを考えておけるかは重要。

### OCP(Open-Closed Principle:オープン・クローズドの原則)
クラスは拡張に対しては開かれていて(オープンである)、変更に対しては閉じている(クローズドである)こと

### 筆者の考え
Rubyはオープンクラスなので、この原則は完全無視している
この原則をRubyでは当てはめようとするのは無駄な抵抗

### 自分の考え
OCPは機能追加の際に既存クラスに手を加える必要なしで機能を拡張できる、機能変更の場合は関係するクラスだけを変更すればいい構造にしておくということを言いたかったはず。
ちょっと思っている感じと違う。

### LSP(Liskov Substitution Principle:リスコフの置換原則)
型 T のオブジェクトを使っている場所ならどこであっても、型 T のサブタイプで置き換えられるべき

### 筆者の考え
この原則に従えば、使用しているオブジェクトをそのオブジェクトのどのサブクラスで置き換えても壊れない。
例では引数が異なっていたとしても、引数をオプショナル位置引数かキーワード引数として定義すれば従える例を出している。
TODO

### 自分の考え
TODO

### ISP(Interface Segregation Principle:インターフェイス分離の原則) 
### 筆者の考え
TODO
### 自分の考え
TODO

### DIP(Dependency Inversion Principle:依存関係逆転の原則)
### 筆者の考え
TODO
### 自分の考え
TODO


# 試したこと、コードサンプル
特になし

# 疑問、質問
